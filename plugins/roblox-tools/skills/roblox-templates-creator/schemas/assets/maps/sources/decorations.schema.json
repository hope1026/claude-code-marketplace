{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "decorations.schema.json",
  "title": "Decorations Schema",
  "description": "Map decoration asset definitions - unified environment + addon-structures",

  "definitions": {
    "vector3": {
      "type": "object",
      "properties": {
        "x": { "type": "number" },
        "y": { "type": "number" },
        "z": { "type": "number" }
      },
      "required": ["x", "y", "z"]
    },

    "focusView": {
      "type": "object",
      "description": "Camera positioning for focus_camera tool when viewing this decoration",
      "properties": {
        "distance": { "type": "number", "description": "Camera distance from target (studs)" },
        "offset": { "$ref": "#/definitions/vector3", "description": "Camera offset from target for lookAt calculation (studs)" }
      },
      "required": ["distance", "offset"]
    },

    "bounds": {
      "type": "object",
      "properties": {
        "min": { "$ref": "#/definitions/vector3" },
        "max": { "$ref": "#/definitions/vector3" }
      },
      "required": ["min", "max"],
      "description": "Asset bounding box (studs)"
    },

    "decoration": {
      "type": "object",
      "properties": {
        "id": { "type": "integer", "description": "Roblox asset ID" },
        "name": { "type": "string" },
        "weight": {
          "type": "number",
          "minimum": 0,
          "maximum": 10,
          "default": 1.0,
          "description": "Selection probability weight"
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" }
        },
        "size": {
          "type": "string",
          "enum": ["small", "medium", "large"],
          "description": "Asset size classification"
        },
        "creator": { "type": "string", "description": "Creator's Roblox username" },
        "bounds": { "$ref": "#/definitions/bounds" },
        "groundOffsetY": {
          "type": "number",
          "default": 0,
          "description": "Y offset from bounds.min.y to visual ground level (studs)"
        },
        "compatibleTerrains": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Compatible terrain preset list"
        },
        "focusView": { "$ref": "#/definitions/focusView" }
      },
      "required": ["id", "name"]
    },

    "decorationSet": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Set unique ID",
          "pattern": "^[a-z][a-z0-9_]*$"
        },
        "name": { "type": "string" },
        "category": {
          "type": "string",
          "enum": ["vegetation", "rocks", "structures", "props", "lighting", "furniture"],
          "description": "Asset category"
        },
        "theme": {
          "type": "string",
          "enum": ["forest", "desert", "snow", "volcanic", "plains", "medieval", "modern", "universal"],
          "description": "Theme compatibility"
        },
        "items": {
          "type": "array",
          "items": { "$ref": "#/definitions/decoration" },
          "minItems": 1
        }
      },
      "required": ["id", "name", "category", "items"]
    }
  },

  "type": "object",
  "properties": {
    "_meta": {
      "type": "object",
      "properties": {
        "category": { "type": "string" },
        "description": { "type": "string" },
        "lastUpdated": { "type": "string", "format": "date" },
        "totalSets": { "type": "integer" },
        "schemaRef": { "type": "string" },
        "placementNotes": {
          "type": "object",
          "description": "Documentation for decoration placement calculation",
          "properties": {
            "groundOffsetY": { "type": "string" },
            "placement": { "type": "string" }
          }
        }
      }
    },
    "sets": {
      "type": "array",
      "items": { "$ref": "#/definitions/decorationSet" }
    }
  },
  "required": ["_meta", "sets"],

  "examples": [
    {
      "_meta": {
        "category": "decorations",
        "description": "Unified map decoration asset registry",
        "lastUpdated": "2026-01-30",
        "totalSets": 2
      },
      "sets": [
        {
          "id": "forest_trees",
          "name": "Forest Trees",
          "category": "vegetation",
          "theme": "forest",
          "items": [
            {
              "id": 11672970103,
              "name": "Oak Tree",
              "weight": 1.0,
              "tags": ["tree", "deciduous"],
              "size": "large",
              "focusView": { "distance": 50, "offset": { "x": 20, "y": 10, "z": 20 } }
            }
          ]
        }
      ]
    }
  ]
}
