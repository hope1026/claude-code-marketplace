{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "spawn-zone.schema.json",
  "title": "Spawn Zone Schema",
  "description": "스폰 영역 정의 - 플레이어, 몬스터, 오브젝트가 스폰될 수 있는 범위",

  "definitions": {
    "vector3": {
      "type": "object",
      "properties": {
        "x": { "type": "number" },
        "y": { "type": "number" },
        "z": { "type": "number" }
      },
      "required": ["x", "y", "z"],
      "additionalProperties": false
    },

    "aabbVolume": {
      "type": "object",
      "description": "Axis-Aligned Bounding Box - 축 정렬 박스 영역",
      "properties": {
        "min": { "$ref": "#/definitions/vector3", "description": "최소 좌표 (studs)" },
        "max": { "$ref": "#/definitions/vector3", "description": "최대 좌표 (studs)" }
      },
      "required": ["min", "max"],
      "additionalProperties": false
    },

    "sphereVolume": {
      "type": "object",
      "description": "구형 영역",
      "properties": {
        "center": { "$ref": "#/definitions/vector3", "description": "중심점 (studs)" },
        "radius": { "type": "number", "minimum": 1, "description": "반경 (studs)" }
      },
      "required": ["center", "radius"],
      "additionalProperties": false
    },

    "spawnZone": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "영역 고유 ID",
          "pattern": "^[a-z][a-z0-9_]*$"
        },
        "name": {
          "type": "string",
          "description": "영역 표시 이름"
        },
        "type": {
          "type": "string",
          "enum": ["aabb", "sphere"],
          "description": "영역 형태"
        },
        "volume": {
          "oneOf": [
            { "$ref": "#/definitions/aabbVolume" },
            { "$ref": "#/definitions/sphereVolume" }
          ],
          "description": "영역 볼륨 정의"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["player", "monster", "npc", "object", "safe", "combat", "boss"]
          },
          "description": "스폰 대상 태그"
        },
        "weight": {
          "type": "number",
          "minimum": 0,
          "maximum": 10,
          "default": 1.0,
          "description": "스폰 확률 가중치 (높을수록 자주 선택됨)"
        },
        "heightOffset": {
          "type": "number",
          "default": 3,
          "description": "지면 위 스폰 높이 오프셋 (studs)"
        }
      },
      "required": ["id", "type", "volume", "tags"],
      "additionalProperties": false
    }
  },

  "type": "array",
  "items": { "$ref": "#/definitions/spawnZone" },
  "minItems": 1,

  "examples": [
    [
      {
        "id": "player_spawn_main",
        "name": "Main Player Spawn",
        "type": "aabb",
        "volume": {
          "min": { "x": -50, "y": 20, "z": -50 },
          "max": { "x": 50, "y": 40, "z": 50 }
        },
        "tags": ["player", "safe"],
        "weight": 1.0,
        "heightOffset": 3
      },
      {
        "id": "monster_zone_forest",
        "name": "Forest Monster Zone",
        "type": "sphere",
        "volume": {
          "center": { "x": 200, "y": 30, "z": 150 },
          "radius": 80
        },
        "tags": ["monster", "combat"],
        "weight": 2.0
      }
    ]
  ]
}
